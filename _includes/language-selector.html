<!-- _includes/language-selector.html -->
{% assign langs = site.data.language | keys %}

<div class="language-selector">
    <label for="lang-select">{{ t.language | default: 'Language' }}:</label>
    <select id="lang-select" onchange="changeLanguage(this.value)">
        {% for lang in langs %}
            <option
                value="{{ lang }}"
                {% if site.lang == lang %}
                    selected
                {% endif %}
            >
                {% case lang %}
                    {% when 'pt' -%}
                        PortuguÃªs
                    {% when 'en' -%}
                        English
                    {% else -%}
                        {{- lang }}
                {% endcase %}
            </option>
        {% endfor %}
    </select>
</div>

<script>
    function changeLanguage(lang) {
        const currentPath = window.location.pathname;
        // Remove idioma antigo da URL se existir
        const newPath = currentPath.replace(/\/(pt|en)\//, '/').replace(/^(\/pt|\/en)\//, '/');
        // Adiciona novo idioma
        window.location.href = '/' + lang + newPath;
    }
</script>

<style>
    .language-selector {
        display: flex;
        align-items: center;
        gap: 8px;
    }

    .language-selector select {
        padding: 6px 10px;
        border: 1px solid #ddd;
        border-radius: 4px;
        cursor: pointer;
    }
</style>
